(define counter (lambda (var rate)
    (let (
            (inner-fun (lambda (x)
                (progn
                    (setvar var x)
                    (yield (/ 1000000 rate))
                    (inner-fun (+ x 1))
            )))
        ) (inner-fun 0)
    )
))

(spawn 20 counter 'cnt01 10)
(spawn 20 counter 'cnt02 20)
(spawn 20 counter 'cnt03 30)
(spawn 20 counter 'cnt04 40)
(spawn 20 counter 'cnt05 50)
(spawn 20 counter 'cnt06 60)
(spawn 20 counter 'cnt07 70)
(spawn 20 counter 'cnt08 80)
(spawn 20 counter 'cnt09 90)
(spawn 20 counter 'cnt10 100)
(spawn 20 counter 'cnt11 110)
(spawn 20 counter 'cnt12 120)
(spawn 20 counter 'cnt13 130)
(spawn 20 counter 'cnt14 140)
(spawn 20 counter 'cnt15 150)
(spawn 20 counter 'cnt16 160)
(spawn 20 counter 'cnt17 170)
(spawn 20 counter 'cnt18 180)
(spawn 20 counter 'cnt19 190)
(spawn 20 counter 'cnt20 200)
(spawn 20 counter 'cnt21 210)
(spawn 20 counter 'cnt22 220)
(spawn 20 counter 'cnt23 230)
(spawn 20 counter 'cnt24 240)
(spawn 20 counter 'cnt25 250)
